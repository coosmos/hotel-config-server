spring.application.name=api-gateway
server.port=9090
# JWT Configuration (MUST MATCH auth-service EXACTLY)
jwt.secret=5367566B59703373367639792F423F4528482B4D6251655468576D5A71347437
jwt.expiration=86400000
# Public Routes (No JWT validation needed)
app.public.routes=/api/auth/register,/api/auth/login,/actuator/**
# Logging Configuration
logging.level.root=INFO
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.com.hotel.gateway=DEBUG
# Eureka Client Configuration
eureka.client.service-url.defaultZone=http://eureka-server:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.prefer-ip-address=true
# Gateway Routes Configuration
# Auth Service Routes (Port: 8081)
spring.cloud.gateway.routes[0].id=auth-service
spring.cloud.gateway.routes[0].uri=http://auth-service:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/**
# Hotel Service Routes (Port: 8082)
spring.cloud.gateway.routes[1].id=hotel-service
spring.cloud.gateway.routes[1].uri=http://hotel-service:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/hotels/**
# Booking Service Routes (Port: 8083)
spring.cloud.gateway.routes[2].id=booking-service
spring.cloud.gateway.routes[2].uri=http://booking-service:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/bookings/**
# Global CORS Configuration
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedOrigins=http://localhost:3000,http://localhost:4200
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS,PATCH
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowCredentials=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].maxAge=3600
# Circuit Breaker Configuration
spring.cloud.gateway.routes[0].filters[0]=CircuitBreaker=name=auth-service-cb
spring.cloud.gateway.routes[1].filters[0]=CircuitBreaker=name=hotel-service-cb
spring.cloud.gateway.routes[2].filters[0]=CircuitBreaker=name=booking-service-cb
# Resilience4j Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.auth-service-cb.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.auth-service-cb.slidingWindowSize=10
resilience4j.circuitbreaker.instances.auth-service-cb.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.auth-service-cb.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.auth-service-cb.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.auth-service-cb.failureRateThreshold=50
resilience4j.circuitbreaker.instances.auth-service-cb.slowCallDurationThreshold=2s
resilience4j.circuitbreaker.instances.auth-service-cb.slowCallRateThreshold=50
# TimeLimiter
resilience4j.timelimiter.instances.auth-service-cb.timeout-duration=60s
resilience4j.timelimiter.instances.auth-service-cb.cancel-running-future=true
resilience4j.timelimiter.instances.hotel-service-cb.timeout-duration=60s
resilience4j.timelimiter.instances.hotel-service-cb.cancel-running-future=true
resilience4j.timelimiter.instances.booking-service-cb.timeout-duration=60s
resilience4j.timelimiter.instances.booking-service-cb.cancel-running-future=true
# Rate Limiting Configuration (using Redis)
spring.redis.host=redis
spring.redis.port=6379
spring.cloud.gateway.filter.request-rate-limiter.enabled=true
# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,gateway
management.endpoint.health.show-details=always
management.endpoint.gateway.enabled=true
# Gateway Timeout Configuration
spring.cloud.gateway.httpclient.connect-timeout=60000
spring.cloud.gateway.httpclient.response-timeout=60s
# Discovery Locator (if using Eureka)
spring.cloud.gateway.discovery.locator.enabled=false
spring.cloud.gateway.discovery.locator.lower-case-service-id=true
